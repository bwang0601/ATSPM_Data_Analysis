<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Bruce Wang" />

<meta name="date" content="2019-11-11" />

<title>03_data</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">ATSPM DATA ANALYSIS</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="01_data.html">Aggregation Table- FtUnion</a>
</li>
<li>
  <a href="02_data.html">Group Statistics and Plots- FtUnion </a>
</li>
<li>
  <a href="03_data.html">K-Mean Cluster Analysis- FtUnion</a>
</li>
<li>
  <a href="05_data.html">Aggregation Table- 800N</a>
</li>
<li>
  <a href="06_data.html">Group Statistics and Plots- 800N </a>
</li>
<li>
  <a href="07_data.html">K-Mean Cluster Analysis- 800N</a>
</li>
<li>
  <a href="05_data.html">Aggregation Table- StateSt</a>
</li>
<li>
  <a href="06_data.html">Group Statistics and Plots- StateSt </a>
</li>
<li>
  <a href="07_data.html">K-Mean Cluster Analysis- StateSt</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">03_data</h1>
<h4 class="author">Bruce Wang</h4>
<h4 class="date">11/11/2019</h4>

</div>


<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.2.1     v purrr   0.3.2
## v tibble  2.1.3     v dplyr   0.8.3
## v tidyr   0.8.3     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.4.0</code></pre>
<pre><code>## -- Conflicts ------------------------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>dfAMPeck &lt;- read_rds(&quot;data/dfAMPeck.rds&quot;)
dfMidDay &lt;- read_rds(&quot;data/dfMidDay.rds&quot;)</code></pre>
<div id="k-means-cluster-analysis" class="section level2">
<h2>K-means Cluster Analysis</h2>
<pre class="r"><code># Setup Cluster variables
set.seed(3)

cluster_variables &lt;- c(&quot;TotalVolume&quot;, &quot;SplitFailures&quot;, &quot;ArrivalsOnGreen&quot;, &quot;PlatoonRatio&quot;, &quot;TotalRedLightViolations&quot;)

# Create Table without NA Volue
complete_dfAMPeak &lt;- na.omit(dfAMPeck)

complete_dfMidDay &lt;- na.omit(dfMidDay)

# AMPeak Normal and Scaled clusters
clusters_AMPeak &lt;- complete_dfAMPeak %&gt;%
  select(cluster_variables) %&gt;%
  kmeans(centers = 5)

scaled_clusters_AMPeak &lt;- complete_dfAMPeak %&gt;%
  select(cluster_variables) %&gt;%
  mutate_all(scale) %&gt;% # want to scale the data to make it normalized for kmeans
  kmeans(centers = clusters_AMPeak$centers %&gt;% scale() )

clustered_dfAMPeak &lt;- complete_dfAMPeak %&gt;%
  mutate(cluster = clusters_AMPeak$cluster,
         scaled_cluster_AMPeak = scaled_clusters_AMPeak$cluster)

# MidDay Normal and Scaled clusters
clusters_MidDay &lt;- complete_dfMidDay %&gt;%
  select(cluster_variables) %&gt;%
  kmeans(centers = 5)

scaled_clusters_MidDay &lt;- complete_dfMidDay %&gt;%
  select(cluster_variables) %&gt;%
  mutate_all(scale) %&gt;% # want to scale the data to make it normalized for kmeans
  kmeans(centers = clusters_MidDay$centers %&gt;% scale() )

clustered_dfMidDay &lt;- complete_dfMidDay %&gt;%
  mutate(cluster = clusters_MidDay$cluster,
         scaled_cluster_MidDay = scaled_clusters_MidDay$cluster)</code></pre>
<p>How different are the clusterings? Turns out they are very different!</p>
<pre class="r"><code>clustered_dfAMPeak %&gt;%
  group_by(cluster, scaled_cluster_AMPeak) %&gt;%
  tally() %&gt;%
  spread(scaled_cluster_AMPeak, n, fill = 0) %&gt;%
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">cluster</th>
<th align="right">1</th>
<th align="right">2</th>
<th align="right">3</th>
<th align="right">4</th>
<th align="right">5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">499</td>
<td align="right">5</td>
<td align="right">13</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">142</td>
<td align="right">552</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">26</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">218</td>
<td align="right">186</td>
<td align="right">65</td>
<td align="right">0</td>
<td align="right">42</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">162</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">676</td>
<td align="right">408</td>
<td align="right">49</td>
<td align="right">0</td>
<td align="right">70</td>
</tr>
</tbody>
</table>
<p>Going forward, we will make only plots using the scaled clutering algorithm.</p>
</div>
<div id="distributions" class="section level2 tabset">
<h2>Distributions</h2>
<p>We want to try to categorize the clusters based on their values for specific performance measures to see if the clustering can tell us, for instance, if an intersection is performing well or poorly based on its cluster assignment alone.</p>
<div id="splitfailures-ampeak" class="section level3">
<h3>SplitFailures AMPeak</h3>
<pre class="r"><code>clustered_dfAMPeak %&gt;%
  ggplot(aes(x = SplitFailures)) + geom_bar() + facet_wrap(~scaled_cluster_AMPeak)</code></pre>
<p><img src="03_data_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="splitfailures-midday" class="section level3">
<h3>SplitFailures MidDay</h3>
<pre class="r"><code>clustered_dfMidDay %&gt;%
  ggplot(aes(x = SplitFailures)) + geom_bar() + facet_wrap(~scaled_cluster_MidDay)</code></pre>
<p><img src="03_data_files/figure-html/unnamed-chunk-6-1.png" width="672" /> Now let’s make a table where the percent of cycles ending in split failure by cluster can be plotted.</p>
<pre class="r"><code>clustered_dfAMPeak %&gt;%
  group_by(scaled_cluster_AMPeak) %&gt;%
  summarize(
    `0` = sum(ifelse(SplitFailures == 0, TRUE, FALSE)) / n(),
    `0- 3` = sum(ifelse(SplitFailures &lt;= 3, TRUE, FALSE)) / n(),
    `&gt; 3` = sum(ifelse(SplitFailures &gt; 3, TRUE, FALSE)) / n()
  )</code></pre>
<pre><code>## # A tibble: 5 x 4
##   scaled_cluster_AMPeak    `0` `0- 3` `&gt; 3`
##                   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1                     1 0.920   1     0    
## 2                     2 0.935   1     0    
## 3                     3 0.0233  0.791 0.209
## 4                     4 0.896   1     0    
## 5                     5 0.797   1     0</code></pre>
<pre class="r"><code>clustered_dfMidDay %&gt;%
  group_by(scaled_cluster_MidDay) %&gt;%
  summarize(
    `0` = sum(ifelse(SplitFailures == 0, TRUE, FALSE)) / n(),
    `0- 3` = sum(ifelse(SplitFailures &lt;= 3, TRUE, FALSE)) / n(),
    `&gt; 3` = sum(ifelse(SplitFailures &gt; 3, TRUE, FALSE)) / n()
  )</code></pre>
<pre><code>## # A tibble: 5 x 4
##   scaled_cluster_MidDay     `0` `0- 3`    `&gt; 3`
##                   &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1                     1 0.640    0.995 0.00506 
## 2                     2 0.100    0.783 0.217   
## 3                     3 0.812    0.976 0.0242  
## 4                     4 0.00760  0.266 0.734   
## 5                     5 0.815    0.999 0.000978</code></pre>
<pre class="r"><code>clustered_dfAMPeak %&gt;%
  group_by(scaled_cluster_AMPeak) %&gt;%
  summarize(
    `0` = sum(ifelse(ArrivalsOnRed == 0, TRUE, FALSE)) / n(),
    `1- 3` = sum(ifelse(ArrivalsOnRed&lt; 3, TRUE, FALSE)) / n(),
    `&gt; 4` = sum(ifelse(ArrivalsOnRed &gt; 4, TRUE, FALSE)) / n()
  )</code></pre>
<pre><code>## # A tibble: 5 x 4
##   scaled_cluster_AMPeak    `0` `1- 3` `&gt; 4`
##                   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1                     1 0      0.0156 0.949
## 2                     2 0.0547 0.125  0.840
## 3                     3 0      0      1    
## 4                     4 0      0      1    
## 5                     5 0      0      1</code></pre>
</div>
</div>
<div id="plots" class="section level2 tabset">
<h2>Plots</h2>
<p>I wonder if we can code up some kind of discrimination function based on the clusters. Like, draw the blue line so it contains 80% of points in cluster 1.</p>
<pre class="r"><code># blue_level &lt;- clustered_df %&gt;%
#   filter(scaled_cluster == 1) %&gt;%
#   select(scaled_cluster, ForceOffs) %&gt;%
#   group_by(ForceOffs) %&gt;% tally() %&gt;%
#   mutate(p = n / sum(n),
#          cump = cumsum(p)) %&gt;%
#   filter(cump &lt; 0.85) %&gt;%
#   slice(nrow(.)) %&gt;% .$ForceOffs
# 
# ggplot(clustered_df, aes(x = TotalVolume, y = ForceOffs, color = factor(scaled_cluster))) +
#   geom_abline(slope = 30/200, intercept = 0, col = &quot;red&quot;)+
#   geom_abline(slope = 30/400, intercept = -5, col = &quot;red&quot;)+
#   geom_abline(slope = 30/600, intercept = -10, col = &quot;red&quot;)+
#   geom_abline(slope = 30/800, intercept = -15, col = &quot;red&quot;)+
#   geom_hline(yintercept = blue_level, col = &quot;blue&quot;)+
#   geom_point(alpha = 0.3) 
# ggplot(clustered_df, aes(x = TotalVolume/TotalCycles, y = ForceOffs/TotalCycles, color = factor(scaled_cluster))) +
#   geom_point(alpha = 0.3)</code></pre>
<div id="platoonratio-vs-percentaog-ampeak" class="section level3">
<h3>PlatoonRatio VS PercentAOG AMPeak</h3>
<pre class="r"><code>ggplot(clustered_dfAMPeak, aes(x = PlatoonRatio, y = PercentAOG, color = factor(scaled_cluster_AMPeak))) +
  # geom_abline(slope = 30/200, intercept = 0, col = &quot;red&quot;)+
  # geom_abline(slope = 30/400, intercept = -5, col = &quot;red&quot;)+
  # geom_abline(slope = 30/600, intercept = -10, col = &quot;red&quot;)+
  # geom_abline(slope = 30/800, intercept = -15, col = &quot;red&quot;)+
  geom_point(alpha = 0.3)+
  theme_bw()</code></pre>
<p><img src="03_data_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="platoonratio-vs-percentaog-midday" class="section level3">
<h3>PlatoonRatio VS PercentAOG MidDay</h3>
<pre class="r"><code>ggplot(clustered_dfMidDay, aes(x = PlatoonRatio, y = PercentAOG, color = factor(scaled_cluster_MidDay))) +
  # geom_abline(slope = 30/200, intercept = 0, col = &quot;red&quot;)+
  # geom_abline(slope = 30/400, intercept = -5, col = &quot;red&quot;)+
  # geom_abline(slope = 30/600, intercept = -10, col = &quot;red&quot;)+
  # geom_abline(slope = 30/800, intercept = -15, col = &quot;red&quot;)+
  geom_point(alpha = 0.3)</code></pre>
<p><img src="03_data_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="totalvolume-vs-percentaog-ampeak" class="section level3">
<h3>TotalVolume VS PercentAOG AMPeak</h3>
<pre class="r"><code>ggplot(clustered_dfAMPeak, aes(x = TotalVolume, y =PercentAOG, color = factor(scaled_cluster_AMPeak))) +
  geom_point(alpha = 0.3)</code></pre>
<p><img src="03_data_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="totalvolume-vs-percentaog-midday" class="section level3">
<h3>TotalVolume VS PercentAOG MidDay</h3>
<pre class="r"><code>ggplot(clustered_dfMidDay, aes(x = TotalVolume, y =PercentAOG, color = factor(scaled_cluster_MidDay))) +
  geom_point(alpha = 0.3)</code></pre>
<p><img src="03_data_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="totalvolume-vs-splitfailures-ampeak" class="section level3">
<h3>TotalVolume VS SplitFailures AMPeak</h3>
<pre class="r"><code>ggplot(clustered_dfAMPeak, aes(x = TotalVolume/TotalCycles, y = SplitFailures/TotalCycles, color = factor(scaled_cluster_AMPeak)))+   geom_point(alpha = 0.3)</code></pre>
<p><img src="03_data_files/figure-html/vol-vs-red-AM-1.png" width="672" /></p>
</div>
<div id="totalvolume-vs-splitfailures-midday" class="section level3">
<h3>TotalVolume VS SplitFailures MidDay</h3>
<pre class="r"><code>ggplot(clustered_dfMidDay, aes(x = TotalVolume/TotalCycles, y = SplitFailures/TotalCycles, color = factor(scaled_cluster_MidDay)))+   geom_point(alpha = 0.3)</code></pre>
<p><img src="03_data_files/figure-html/vol-vs-red-MD-1.png" width="672" /></p>
</div>
<div id="platoonratio-vs-split-failures-ampeak" class="section level3">
<h3>PlatoonRatio VS Split Failures AMPeak</h3>
<pre class="r"><code>ggplot(clustered_dfAMPeak, aes(x = PlatoonRatio, y = SplitFailures/TotalCycles, color = factor(scaled_cluster_AMPeak))) +
  # geom_abline(slope = 30/200, intercept = 0, col = &quot;red&quot;)+
  # geom_abline(slope = 30/400, intercept = -5, col = &quot;red&quot;)+
  # geom_abline(slope = 30/600, intercept = -10, col = &quot;red&quot;)+
  # geom_abline(slope = 30/800, intercept = -15, col = &quot;red&quot;)+
  geom_point(alpha = 0.3)</code></pre>
<p><img src="03_data_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="platoonratio-vs-split-failures-ampeak-1" class="section level3">
<h3>PlatoonRatio VS Split Failures AMPeak</h3>
<pre class="r"><code>ggplot(clustered_dfMidDay, aes(x = PlatoonRatio, y = SplitFailures/TotalCycles, color = factor(scaled_cluster_MidDay))) +
  # geom_abline(slope = 30/200, intercept = 0, col = &quot;red&quot;)+
  # geom_abline(slope = 30/400, intercept = -5, col = &quot;red&quot;)+
  # geom_abline(slope = 30/600, intercept = -10, col = &quot;red&quot;)+
  # geom_abline(slope = 30/800, intercept = -15, col = &quot;red&quot;)+
  geom_point(alpha = 0.3)</code></pre>
<p><img src="03_data_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>
<div id="totalvolume-vs-totalredlightviolations-ampeak" class="section level3">
<h3>TotalVolume VS TotalRedLightViolations AMPeak</h3>
<pre class="r"><code>ggplot(clustered_dfAMPeak, aes(x = TotalVolume/TotalCycles, y = TotalRedLightViolations/TotalCycles, color = factor(scaled_cluster_AMPeak))) +
  geom_point(alpha = 0.3)</code></pre>
<p><img src="03_data_files/figure-html/vol-vs-redlight-AM-1.png" width="672" /></p>
</div>
<div id="totalvolume-vs-totalredlightviolations-midday" class="section level3">
<h3>TotalVolume VS TotalRedLightViolations MidDay</h3>
<pre class="r"><code>ggplot(clustered_dfMidDay, aes(x = TotalVolume/TotalCycles, y = TotalRedLightViolations/TotalCycles, color = factor(scaled_cluster_MidDay))) +
  geom_point(alpha = 0.3)</code></pre>
<p><img src="03_data_files/figure-html/vol-vs-redlight-MD-1.png" width="672" /></p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
